import{c as p,r as a,j as s,L as S,a as A,T as F,A as r,D as P,b as m,u as R,d as I,f as T,R as L,B as _,e as E}from"./index-e8cd6ef5.js";import{u as N,T as w}from"./index.esm-764a8891.js";import{M as C,a as M,I as v,P as D}from"./InfinityScroll-94e062db.js";import"./GlobalStyles-08075e34.js";import"./listItemIconClasses-31f47e27.js";const O=p(e=>e.anime.anime,e=>e);p(e=>e.anime.isLoading,e=>e);class B{constructor({types:i,search:n}){this.types=i,this.search=n}}const V="_card_1r518_1",z={card:V},$=a.forwardRef(({anime:e},i)=>s.jsxs(s.Fragment,{children:[s.jsx(S,{ref:i,alignItems:"flex-start",className:z.card,children:s.jsx(A,{primary:e.titleEnglish,secondary:s.jsxs(F,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:[r.toReadable(e.type)," ",e.status]})})}),s.jsx(P,{})]})),k=a.memo($),q="_aside_1lwpd_1",G={aside:q},u=[{field:m.TitleEnglish,direction:""},{field:m.Status,direction:""}],d={pagination:new D({pageSize:30,pageNumber:0}),sorting:u,filters:new B({types:[],search:""})},H={types:[],search:"",sorting:u},J=()=>{const e=R(),i=I(O),[n,o]=a.useState(d),l=a.useRef(null),g=()=>{o(t=>({...t,pagination:{...t.pagination,pageNumber:t.pagination.pageNumber+1}}))};a.useEffect(()=>{e(T(n))},[n]);const h=N({defaultValues:H}),{register:f,handleSubmit:x,control:c}=h,b=t=>{e(E()),o({...d,sorting:t.sorting})},y=a.useMemo(()=>Object.values(r).slice(0,-1),[r]);return s.jsxs("aside",{className:G.aside,children:[s.jsxs("form",{onSubmit:x(b),children:[s.jsx(C,{name:"types",control:c,items:y,title:"Filter"}),s.jsx(M,{name:"sorting",control:c,title:"Sorting",toReadable:L.toReadable}),s.jsx(w,{label:"Search",...f("search")}),s.jsx(_,{type:"submit",children:"Submit"})]}),s.jsx(v,{lastItemRef:l,onObserve:g,children:i.map((t,j)=>s.jsx(k,{ref:j===i.length-1?l:null,anime:t},t.id))})]})},Y=a.memo(J);export{Y as AnimePage};
