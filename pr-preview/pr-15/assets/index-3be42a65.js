import{g as C,j as e,c as S,r as a,h as D,u as b,d as p,s as F,L as R,a as A,T as E,G as o,i as O,k as u,l as k,m as z,n as f,o as B,B as H,p as V,D as $,O as q,q as J}from"./index-4fb02bcc.js";import{u as K,T as Q}from"./index.esm-8dc0f30e.js";import{M as U,a as W,I as X,P as Y}from"./InfinityScroll-477c9488.js";import{I as Z}from"./IconButton-7d1f3293.js";import"./GlobalStyles-f0429985.js";import"./listItemIconClasses-305a2899.js";const ee=C(e.jsx("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),se=S(s=>s.genres.genres,s=>s),te=S(s=>s.genres.isLoading,s=>s);class G{constructor({types:n,search:r}){this.types=n,this.search=r}}const ae={"card-container":"_card-container_16fj8_1"},ne=a.forwardRef(({genre:s},n)=>{const r=D(),i=b(),c=p(F),l=()=>{c&&i(O()),r(`${s.id}`)};return e.jsx(R,{className:ae["card-container"],ref:n,onClick:l,children:e.jsx(A,{primary:s.name,secondary:e.jsx(E,{component:"span",variant:"body2",color:"text.primary",children:o.toReadable(s.type)})})})}),re=a.memo(ne),oe="_aside_138wd_1",ie="_form_138wd_10",j={aside:oe,form:ie},N=[{field:u.Name,direction:""},{field:u.Type,direction:""}],y={pagination:new Y({pageSize:15,pageNumber:0}),sorting:N,filters:new G({types:[],search:""})},ce={types:[],search:"",sorting:N},le=()=>{const s=b(),n=p(se),r=p(te),i=a.useMemo(()=>o.toArray(),[o]),[c,l]=a.useState(!1),[g,h]=a.useState(y),[I,v]=a.useState(null),M=()=>{h(t=>({...t,pagination:{...t.pagination,pageNumber:t.pagination.pageNumber+1}}))};a.useEffect(()=>{s(k())},[]),a.useEffect(()=>{s(z(g))},[g]);const{register:L,handleSubmit:P,control:x}=K({defaultValues:ce}),d=()=>{l(t=>!t)},T=({types:t,search:m,sorting:w})=>{s(J()),h({...y,sorting:w,filters:new G({types:t,search:m})}),d()},_=a.useCallback(t=>{v(t)},[]);return e.jsxs(f,{sx:{flex:1,display:"flex"},children:[e.jsx(B,{open:c,onClose:d,children:e.jsxs("form",{className:j.form,onSubmit:P(T),children:[e.jsx(Q,{label:"Search",...L("search")}),e.jsx(U,{name:"types",toReadable:o.toReadable,control:x,items:i,title:"Filter"}),e.jsx(W,{name:"sorting",control:x,title:"Sorting",toReadable:u.toReadable}),e.jsx(H,{type:"submit",children:"Apply"})]})}),e.jsxs("aside",{className:j.aside,children:[e.jsx(Z,{onClick:d,children:e.jsx(ee,{})}),e.jsx(X,{lastItemNode:I,onObserve:M,children:e.jsxs(e.Fragment,{children:[r&&n.length===0&&e.jsx(V,{}),n.map((t,m)=>e.jsxs(f,{children:[e.jsx(re,{ref:m===n.length-1?_:null,genre:t}),e.jsx($,{})]},t.id))]})})]}),e.jsx(q,{})]})},xe=a.memo(le);export{xe as GenresPage};
