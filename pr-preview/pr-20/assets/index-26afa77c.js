import{c as y,r as a,u as F,a as b,b as m,n as T,j as e,L as M,d as R,T as A,G as p,o as E,p as u,q as v,t as O,B as x,D as k,k as B,l as V,O as $,v as q}from"./index-4519c325.js";import{u as z,T as H,I as J}from"./index.esm-58d55961.js";import{M as K,a as Q,b as U,I as W,P as X}from"./InfinityScroll-16258b4b.js";import{D as Y}from"./listItemIconClasses-1aa53eba.js";import"./GlobalStyles-9ea71070.js";const Z=y(s=>s.genres.genres,s=>s),ee=y(s=>s.genres.isLoading,s=>s);class S{constructor({types:n,search:r}){this.types=n,this.search=r}}const se={"card-container":"_card-container_16fj8_1"},te=a.forwardRef(({genre:s},n)=>{const r=F(),i=b(),c=m(T),o=()=>{c&&i(E()),r(`${s.id}`)};return e.jsx(M,{className:se["card-container"],ref:n,onClick:o,children:e.jsx(R,{primary:s.name,secondary:e.jsx(A,{component:"span",variant:"body2",color:"text.primary",children:p.toReadable(s.type)})})})}),ae=a.memo(te),ne="_aside_1woft_1",re="_form_1woft_14",h={aside:ne,form:re},G=[{field:u.Name,direction:""},{field:u.Type,direction:""}],j={pagination:new X({pageSize:15,pageNumber:0}),sorting:G,filters:new S({types:[],search:""})},oe={types:[],search:"",sorting:G},ie=()=>{const s=b(),n=m(Z),r=m(ee),[i,c]=a.useState(!1),[o,g]=a.useState(j),[N,I]=a.useState(null),D=()=>{g(t=>({...t,pagination:{...t.pagination,pageNumber:t.pagination.pageNumber+1}}))};a.useEffect(()=>{s(v())},[]),a.useEffect(()=>{s(O(o))},[o]);const{register:L,handleSubmit:P,control:f}=z({defaultValues:oe}),l=()=>{c(t=>!t)},_=({types:t,search:d,sorting:C})=>{s(q()),g({...j,sorting:C,filters:new S({types:t,search:d})}),l()},w=a.useCallback(t=>{I(t)},[]);return e.jsxs(x,{sx:{flex:1,display:"flex"},children:[e.jsx(k,{open:i,onClose:l,children:e.jsxs("form",{className:h.form,onSubmit:P(_),children:[e.jsx(H,{label:"Search",...L("search")}),e.jsx(K,{name:"types",title:"Filter",toReadable:p.toReadable,control:f,items:p.toArray()}),e.jsx(Q,{name:"sorting",title:"Sorting",control:f,toReadable:u.toReadable}),e.jsx(B,{type:"submit",children:"Apply"})]})}),e.jsxs("aside",{className:h.aside,children:[e.jsx(J,{onClick:l,children:e.jsx(U,{})}),e.jsx(W,{lastItemNode:N,onObserve:D,children:e.jsxs(e.Fragment,{children:[r&&n.length===0&&e.jsx(V,{}),n.map((t,d)=>e.jsxs(x,{children:[e.jsx(ae,{ref:d===n.length-1?w:null,genre:t}),e.jsx(Y,{})]},t.id))]})})]}),e.jsx($,{})]})},ue=a.memo(ie);export{ue as GenresPage};
