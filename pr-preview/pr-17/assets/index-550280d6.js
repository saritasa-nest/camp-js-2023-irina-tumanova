import{b as y,r as a,d as C,u as b,e as d,s as F,j as e,L as T,g as R,T as A,G as p,h as E,i as u,k as O,l as k,m as x,D as v,B,n as V,O as $,o as z}from"./index-293e564e.js";import{u as q,T as H}from"./index.esm-c1534951.js";import{M as J,P as K}from"./MultipleSort-7e782a1d.js";import{M as Q,I as U,D as W}from"./InfinityScroll-a4c6dbc8.js";import{M as X}from"./MultipleSelect-d5c8196f.js";import{I as Y}from"./IconButton-7618bcdc.js";const Z=y(s=>s.genres.genres,s=>s),ee=y(s=>s.genres.isLoading,s=>s);class S{constructor({types:n,search:r}){this.types=n,this.search=r}}const se={"card-container":"_card-container_16fj8_1"},te=a.forwardRef(({genre:s},n)=>{const r=C(),i=b(),c=d(F),o=()=>{c&&i(E()),r(`${s.id}`)};return e.jsx(T,{className:se["card-container"],ref:n,onClick:o,children:e.jsx(R,{primary:s.name,secondary:e.jsx(A,{component:"span",variant:"body2",color:"text.primary",children:p.toReadable(s.type)})})})}),ae=a.memo(te),ne="_aside_1iiw9_1",re="_form_1iiw9_13",h={aside:ne,form:re},G=[{field:u.Name,direction:""},{field:u.Type,direction:""}],j={pagination:new K({pageSize:15,pageNumber:0}),sorting:G,filters:new S({types:[],search:""})},oe={types:[],search:"",sorting:G},ie=()=>{const s=b(),n=d(Z),r=d(ee),[i,c]=a.useState(!1),[o,g]=a.useState(j),[N,I]=a.useState(null),D=()=>{g(t=>({...t,pagination:{...t.pagination,pageNumber:t.pagination.pageNumber+1}}))};a.useEffect(()=>{s(O())},[]),a.useEffect(()=>{s(k(o))},[o]);const{register:L,handleSubmit:M,control:f}=q({defaultValues:oe}),l=()=>{c(t=>!t)},P=({types:t,search:m,sorting:w})=>{s(z()),g({...j,sorting:w,filters:new S({types:t,search:m})}),l()},_=a.useCallback(t=>{I(t)},[]);return e.jsxs(x,{sx:{flex:1,display:"flex"},children:[e.jsx(v,{open:i,onClose:l,children:e.jsxs("form",{className:h.form,onSubmit:M(P),children:[e.jsx(H,{label:"Search",...L("search")}),e.jsx(X,{name:"types",title:"Filter",toReadable:p.toReadable,control:f,items:p.toArray()}),e.jsx(J,{name:"sorting",title:"Sorting",control:f,toReadable:u.toReadable}),e.jsx(B,{type:"submit",children:"Apply"})]})}),e.jsxs("aside",{className:h.aside,children:[e.jsx(Y,{onClick:l,children:e.jsx(Q,{})}),e.jsx(U,{lastItemNode:N,onObserve:D,children:e.jsxs(e.Fragment,{children:[r&&n.length===0&&e.jsx(V,{}),n.map((t,m)=>e.jsxs(x,{children:[e.jsx(ae,{ref:m===n.length-1?_:null,genre:t}),e.jsx(W,{})]},t.id))]})})]}),e.jsx($,{})]})},ge=a.memo(ie);export{ge as GenresPage};
