import{q as F,p as k,t as D,_ as p,r as o,z as R,C as T,E,j as s,I as O,J as U,b as L,U as B,u as C,e as f,a9 as z,L as $,a2 as V,g as W,T as q,aa as J,ab as S,S as h,ac as G,ad as H,m as I,D as K,B as Q,n as X,O as Y,ae as Z}from"./index-bbe9acfa.js";import{u as tt,T as st}from"./index.esm-c665bdc9.js";import{M as et,P as at}from"./MultipleSort-49a83114.js";import{M as ot,I as rt,D as it}from"./InfinityScroll-5f475bf7.js";import{I as nt}from"./IconButton-87619d6d.js";function ct(t){return F("MuiListItemAvatar",t)}k("MuiListItemAvatar",["root","alignItemsFlexStart"]);const lt=["className"],mt=t=>{const{alignItems:e,classes:r}=t;return U({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},ct,r)},dt=D("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({ownerState:t})=>p({minWidth:56,flexShrink:0},t.alignItems==="flex-start"&&{marginTop:8})),ut=o.forwardRef(function(e,r){const i=R({props:e,name:"MuiListItemAvatar"}),{className:n}=i,c=T(i,lt),l=o.useContext(E),m=p({},i,{alignItems:l.alignItems}),d=mt(m);return s.jsx(dt,p({className:O(d.root,n),ownerState:m,ref:r},c))}),gt=ut,xt=L(t=>t.studios.studios,t=>t),pt=L(t=>t.studios.isLoading,t=>t);class N{constructor({search:e}){this.search=e}}const ft="_aside_1iiw9_1",St="_form_1iiw9_13",j={aside:ft,form:St},ht=o.forwardRef((t,e)=>s.jsx(B,{ref:e,...t,children:t.children})),It="_studioCard_1uc4k_1",jt="_avatar_1uc4k_11",vt="_avatarImg_1uc4k_16",x={studioCard:It,avatar:jt,avatarImg:vt},Lt=o.forwardRef(({studio:t},e)=>{const r=C(),i=f(z),n=()=>{i&&r(J())};return s.jsxs($,{className:x.studioCard,ref:e,component:ht,to:`${t.id}`,onClick:n,children:[s.jsx(gt,{className:x.avatar,children:s.jsx(V,{alt:"Studio cover",src:t.thumbnailImg,className:x.avatarImg})}),s.jsx(W,{primary:s.jsx(q,{fontSize:17,children:t.name})})]})}),Ct=o.memo(Lt),_=[{field:S.Name,direction:h.None},{field:S.Modified,direction:h.None}],v={pagination:new at({pageSize:15,pageNumber:0}),sorting:_,filters:new N({search:""})},Nt={search:"",sorting:_},_t=()=>{const t=C(),e=f(xt),r=f(pt),[i,n]=o.useState(!1),[c,l]=o.useState(v),[m,d]=o.useState(null);o.useEffect(()=>{t(G())},[]),o.useEffect(()=>{t(H(c))},[c]);const{register:b,handleSubmit:A,control:w}=tt({defaultValues:Nt}),y=()=>{l(a=>({...a,pagination:{...a.pagination,pageNumber:a.pagination.pageNumber+1}}))},u=()=>{n(a=>!a)},M=({search:a,sorting:g})=>{t(Z()),l({...v,sorting:g,filters:new N({search:a})}),u()},P=o.useCallback(a=>{d(a)},[]);return s.jsxs(I,{sx:{flex:1,display:"flex"},children:[s.jsx(K,{open:i,onClose:u,children:s.jsxs("form",{className:j.form,onSubmit:A(M),children:[s.jsx(st,{label:"Search",...b("search")}),s.jsx(et,{name:"sorting",control:w,title:"Sorting",toReadable:S.toReadable}),s.jsx(Q,{type:"submit",children:"Apply"})]})}),s.jsxs("aside",{className:j.aside,children:[s.jsx(nt,{onClick:u,children:s.jsx(ot,{})}),s.jsx(rt,{lastItemNode:m,onObserve:y,children:s.jsxs(s.Fragment,{children:[r&&e.length===0&&s.jsx(X,{}),e.map((a,g)=>s.jsxs(I,{children:[s.jsx(Ct,{ref:g===e.length-1?P:null,studio:a}),s.jsx(it,{})]},a.id))]})})]}),s.jsx(Y,{})]})},Pt=o.memo(_t);export{Pt as StudiosPage};
