import{b as S,r as a,d as F,u as b,e as d,s as T,j as e,L as R,g as A,T as E,G as p,h as O,i as u,S as x,k,l as v,m as h,D as B,B as V,n as $,O as z,o as q}from"./index-bbe9acfa.js";import{u as H,T as J}from"./index.esm-c665bdc9.js";import{M as K,P as Q}from"./MultipleSort-49a83114.js";import{M as U,I as W,D as X}from"./InfinityScroll-5f475bf7.js";import{M as Y}from"./MultipleSelect-9552ce64.js";import{I as Z}from"./IconButton-87619d6d.js";const ee=S(s=>s.genres.genres,s=>s),se=S(s=>s.genres.isLoading,s=>s);class G{constructor({types:n,search:r}){this.types=n,this.search=r}}const te={"card-container":"_card-container_16fj8_1"},ae=a.forwardRef(({genre:s},n)=>{const r=F(),i=b(),c=d(T),o=()=>{c&&i(O()),r(`${s.id}`)};return e.jsx(R,{className:te["card-container"],ref:n,onClick:o,children:e.jsx(A,{primary:s.name,secondary:e.jsx(E,{component:"span",variant:"body2",color:"text.primary",children:p.toReadable(s.type)})})})}),ne=a.memo(ae),re="_aside_1iiw9_1",oe="_form_1iiw9_13",j={aside:re,form:oe},N=[{field:u.Name,direction:x.None},{field:u.Type,direction:x.None}],y={pagination:new Q({pageSize:15,pageNumber:0}),sorting:N,filters:new G({types:[],search:""})},ie={types:[],search:"",sorting:N},ce=()=>{const s=b(),n=d(ee),r=d(se),[i,c]=a.useState(!1),[o,g]=a.useState(y),[D,I]=a.useState(null),L=()=>{g(t=>({...t,pagination:{...t.pagination,pageNumber:t.pagination.pageNumber+1}}))};a.useEffect(()=>{s(k())},[]),a.useEffect(()=>{s(v(o))},[o]);const{register:M,handleSubmit:P,control:f}=H({defaultValues:ie}),l=()=>{c(t=>!t)},_=({types:t,search:m,sorting:C})=>{s(q()),g({...y,sorting:C,filters:new G({types:t,search:m})}),l()},w=a.useCallback(t=>{I(t)},[]);return e.jsxs(h,{sx:{flex:1,display:"flex"},children:[e.jsx(B,{open:i,onClose:l,children:e.jsxs("form",{className:j.form,onSubmit:P(_),children:[e.jsx(J,{label:"Search",...M("search")}),e.jsx(Y,{name:"types",title:"Filter",toReadable:p.toReadable,control:f,items:p.toArray()}),e.jsx(K,{name:"sorting",title:"Sorting",control:f,toReadable:u.toReadable}),e.jsx(V,{type:"submit",children:"Apply"})]})}),e.jsxs("aside",{className:j.aside,children:[e.jsx(Z,{onClick:l,children:e.jsx(U,{})}),e.jsx(W,{lastItemNode:D,onObserve:L,children:e.jsxs(e.Fragment,{children:[r&&n.length===0&&e.jsx($,{}),n.map((t,m)=>e.jsxs(h,{children:[e.jsx(ne,{ref:m===n.length-1?w:null,genre:t}),e.jsx(X,{})]},t.id))]})})]}),e.jsx(z,{})]})},fe=a.memo(ce);export{fe as GenresPage};
