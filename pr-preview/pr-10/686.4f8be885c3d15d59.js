"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[686],{4686:(_t,h,a)=>{a.r(h),a.d(h,{AuthModule:()=>ht});var f=a(89),p=a(2074),U=a(2355),s=a(3810),n=a(6652),l=a(1300),_=a(2151),m=a(6789),x=a(4926),t=a(4355),C=a(1507),g=a(4121),J=a(9676),T=a(8168),v=a(3568),Z=a(5490),P=a(3787),y=a(2522),I=a(447),d=a(5498);let A=(()=>{class e{mapQueryParamsToUrl(r,i){return decodeURIComponent(r[i]??"")}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var w=a(8598),E=a(5338),L=a(8023),Q=a(8801);let q=(()=>{class e{get errorState(){return this._errorState}set errorState(r){this._errorState=r}set formControl(r){this._formControl=r}get formControl(){return this._formControl??new n.NI("")}onChange(r){}onTouched(){}get empty(){return 0===this.formControl.value.trim().length}get shouldLabelFloat(){return this.focused||!this.empty}get placeholder(){return this._placeholder}set placeholder(r){this._placeholder=r,this.stateChanges.next()}get required(){return this._required}set required(r){this._required=(0,E.Ig)(r),this.stateChanges.next()}get disabled(){return this._disabled}set disabled(r){this._disabled=(0,E.Ig)(r),this.stateChanges.next()}constructor(r,i,c){this._focusMonitor=r,this._elementRef=i,this.ngControl=c,this.stateChanges=new L.x,this.focused=!1,this._errorState=!1,this.controlType="password-input",this.id="password-input-"+e.nextId++,this.describedBy="",this.isPasswordHidden=!0,this._formControl=null,this.autocomplete="",this.value="",this._placeholder="",this._required=!1,this._disabled=!1,this.formGroup=(0,t.f3M)(n.sg),r.monitor(i,!0).subscribe(N=>{this.focused&&!N&&this.onTouched(),this.focused=!!N,this.stateChanges.next()}),null!=this.ngControl&&(this.ngControl.valueAccessor=this)}ngDoCheck(){this.updateErrorState()}updateErrorState(){const i=null!==this.formControl.errors&&(this.formControl.touched||this.formGroup.submitted);this.errorState!==i&&(this._errorState=i,this.stateChanges.next())}ngOnDestroy(){this.stateChanges.complete(),this._focusMonitor.stopMonitoring(this._elementRef)}setDescribedByIds(r){this.describedBy=r.join(" ")}onContainerClick(r){if("input"!==r.target.tagName.toLowerCase()){const i=this._elementRef.nativeElement.querySelector("input");i&&i.focus()}}writeValue(r){this.value=r}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}setDisabledState(r){this.disabled=r}_handleInput(){this.onChange(this.value)}changePasswordVisibility(){this.isPasswordHidden=!this.isPasswordHidden}}return e.nextId=0,e.\u0275fac=function(r){return new(r||e)(t.Y36(Q.tE),t.Y36(t.SBq),t.Y36(n.a5,10))},e.\u0275cmp=t.Xpm({type:e,selectors:[["camp-password-field"]],inputs:{formControl:"formControl",autocomplete:"autocomplete",placeholder:"placeholder",required:"required",disabled:"disabled"},features:[t._Bn([{provide:s.Eo,useExisting:e}])],decls:4,vars:6,consts:[["matInput","",3,"type","autocomplete","formControl"],["mat-icon-button","","matSuffix","","type","button",1,"password-visibility-button",3,"click"]],template:function(r,i){1&r&&(t._UZ(0,"input",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return i.changePasswordVisibility()}),t.TgZ(2,"mat-icon"),t._uU(3),t.qZA()()),2&r&&(t.Q6J("type",i.isPasswordHidden?"password":"text")("autocomplete",i.autocomplete)("formControl",i.formControl),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",i.isPasswordHidden),t.xp6(2),t.Oqu(i.isPasswordHidden?"visibility_off":"visibility"))},dependencies:[n.Fj,n.JJ,n.oH,s.R9,p.Nt,l.RK,_.Hw],styles:[".password-visibility-button[_ngcontent-%COMP%]{position:absolute;right:0;top:4px}.password-visibility-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff}"],changeDetection:0}),e})();var S=a(2302);function O(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"p",6),t._uU(2),t.qZA(),t.BQk()),2&e){const r=o.ngIf;t.xp6(2),t.hij(" ",r.errors.common," ")}}function R(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.xi3(2,1,"required","email")))}function M(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"email")))}function Y(e,o){if(1&e&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Email"),t.qZA(),t._UZ(3,"input",7),t.YNc(4,R,3,4,"mat-error",2),t.YNc(5,M,3,3,"mat-error",2),t.qZA()),2&e){const r=o.ngIf;t.xp6(3),t.Q6J("formControl",r),t.xp6(1),t.Q6J("ngIf",r.hasError("required")),t.xp6(1),t.Q6J("ngIf",r.hasError("email"))}}function F(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.xi3(2,1,"required","password")))}function j(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"minlength")," 8"))}function B(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.xi3(2,1,"passwordRepetition","password")))}function D(e,o){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=o.ngIf;t.xp6(1),t.Oqu(r)}}function H(e,o){if(1&e&&(t.TgZ(0,"mat-form-field",8)(1,"mat-label"),t._uU(2,"Password"),t.qZA(),t._UZ(3,"camp-password-field",9),t.YNc(4,F,3,4,"mat-error",2),t.YNc(5,j,3,3,"mat-error",2),t.YNc(6,B,3,4,"mat-error",2),t.YNc(7,D,2,1,"mat-error",2),t.qZA()),2&e){const r=o.ngIf;t.xp6(3),t.Q6J("formControl",r),t.xp6(1),t.Q6J("ngIf",r.hasError("required")),t.xp6(1),t.Q6J("ngIf",r.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",r.hasError("passwordRepetition")),t.xp6(1),t.Q6J("ngIf",r.getError("serverError"))}}function $(e,o){1&e&&t._UZ(0,"camp-shadow-spinner")}let z=(()=>{class e{constructor(){this.isSubmitting$=new g.X(!1),this.loginErrors$=new g.X(null),this.formBuilder=(0,t.f3M)(n.j3),this.authService=(0,t.f3M)(C.e),this.untilDestroyed=(0,y.t)(),this.router=(0,t.f3M)(m.F0),this.route=(0,t.f3M)(m.gz),this.queryParamsService=(0,t.f3M)(A),this.form=this.createForm()}ngOnInit(){this.form.valueChanges.pipe(this.untilDestroyed()).subscribe(()=>this.loginErrors$.next(null))}createForm(){return this.formBuilder.group({email:["",[n.kI.required,n.kI.email]],password:["",[n.kI.required,n.kI.minLength(d.m.MIN_PASSWORD_LENGTH)]]})}handleSubmit(){this.form.invalid||(this.isSubmitting$.next(!0),this.authService.login(this.form.getRawValue()).pipe((0,J.P)(),(0,T.b)(()=>this.navigateToNextUrl()),(0,v.K)(r=>this.handleError(r)),(0,Z.x)(()=>this.isSubmitting$.next(!1)),this.untilDestroyed()).subscribe())}navigateToNextUrl(){this.router.navigateByUrl(this.queryParamsService.mapQueryParamsToUrl(this.route.snapshot.queryParams,"next"))}handleError(r){return r instanceof I.k&&this.loginErrors$.next(r??null),(0,P._)(()=>r)}trackErrorByIndex(r){return r}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["camp-login-page"]],decls:13,vars:9,consts:[[1,"typography-title"],[1,"auth-form",3,"formGroup","ngSubmit"],[4,"ngIf"],["class","password-field",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",1,"auth-form__submit-button"],["routerLink","/auth/signup","mat-button",""],[1,"auth-form__error"],["matInput","","placeholder","example@gmail.com","autocomplete","email",3,"formControl"],[1,"password-field"],["autocomplete","current-password",3,"formControl"]],template:function(r,i){1&r&&(t.TgZ(0,"p",0),t._uU(1,"Sign in"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return i.handleSubmit()}),t.YNc(3,O,3,1,"ng-container",2),t.ALo(4,"async"),t.YNc(5,Y,6,3,"mat-form-field",2),t.YNc(6,H,8,5,"mat-form-field",3),t.TgZ(7,"button",4),t._uU(8,"Sign in"),t.qZA()(),t.TgZ(9,"a",5),t._uU(10,"Sign up"),t.qZA(),t.YNc(11,$,1,0,"camp-shadow-spinner",2),t.ALo(12,"async")),2&r&&(t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("ngIf",t.lcZ(4,5,i.loginErrors$)),t.xp6(2),t.Q6J("ngIf",i.form.controls.email),t.xp6(1),t.Q6J("ngIf",i.form.controls.password),t.xp6(5),t.Q6J("ngIf",t.lcZ(12,7,i.isSubmitting$)))},dependencies:[f.O5,w.e,m.rH,n._Y,n.Fj,n.JJ,n.JL,n.oH,n.sg,s.KE,s.hX,s.TO,p.Nt,l.zs,l.lW,q,f.Ov,S.m],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--space-m);padding:var(--space-m)}.auth-form[_ngcontent-%COMP%]{display:flex;max-width:var(--auth-form-max-width);width:100%;flex-direction:column;gap:var(--space-s);justify-content:center}.auth-form__error[_ngcontent-%COMP%]{color:var(--primary-color);align-self:center}.auth-form__submit-button[_ngcontent-%COMP%]{align-self:center}"],changeDetection:0}),e})();var G=a(4924);function V(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.xi3(2,1,"required","email")))}function K(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"email")))}function W(e,o){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=o.ngIf;t.xp6(1),t.Oqu(r)}}function k(e,o){if(1&e&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Email"),t.qZA(),t._UZ(3,"input",6),t.YNc(4,V,3,4,"mat-error",2),t.YNc(5,K,3,3,"mat-error",2),t.YNc(6,W,2,1,"mat-error",2),t.qZA()),2&e){const r=o.ngIf;t.xp6(3),t.Q6J("formControl",r),t.xp6(1),t.Q6J("ngIf",r.hasError("required")),t.xp6(1),t.Q6J("ngIf",r.hasError("email")),t.xp6(1),t.Q6J("ngIf",r.getError("serverError"))}}function tt(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.xi3(2,1,"required","first name")))}function et(e,o){if(1&e&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"First name"),t.qZA(),t._UZ(3,"input",7),t.YNc(4,tt,3,4,"mat-error",2),t.qZA()),2&e){const r=o.ngIf;t.xp6(3),t.Q6J("formControl",r),t.xp6(1),t.Q6J("ngIf",r.hasError("required"))}}function rt(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.xi3(2,1,"required","last name")))}function ot(e,o){if(1&e&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Last name"),t.qZA(),t._UZ(3,"input",8),t.YNc(4,rt,3,4,"mat-error",2),t.qZA()),2&e){const r=o.ngIf;t.xp6(3),t.Q6J("formControl",r),t.xp6(1),t.Q6J("ngIf",r.hasError("required"))}}function it(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.xi3(2,1,"required","password")))}function nt(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"minlength")," 8"))}function at(e,o){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=o.ngIf;t.xp6(1),t.Oqu(r)}}function st(e,o){if(1&e&&(t.TgZ(0,"mat-form-field",9)(1,"mat-label"),t._uU(2,"Password"),t.qZA(),t._UZ(3,"camp-password-field",10),t.YNc(4,it,3,4,"mat-error",2),t.YNc(5,nt,3,3,"mat-error",2),t.YNc(6,at,2,1,"mat-error",2),t.qZA()),2&e){const r=o.ngIf;t.xp6(3),t.Q6J("formControl",r),t.xp6(1),t.Q6J("ngIf",r.hasError("required")),t.xp6(1),t.Q6J("ngIf",r.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",r.getError("serverError"))}}function mt(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.xi3(2,1,"required","repeated password")))}function lt(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"minlength")," 8"))}function ft(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"fieldErrorText"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.xi3(2,1,"passwordRepetition","repeated password")))}function ut(e,o){if(1&e&&(t.TgZ(0,"mat-form-field",9)(1,"mat-label"),t._uU(2,"Re-type password"),t.qZA(),t._UZ(3,"camp-password-field",10),t.YNc(4,mt,3,4,"mat-error",2),t.YNc(5,lt,3,3,"mat-error",2),t.YNc(6,ft,3,4,"mat-error",2),t.qZA()),2&e){const r=o.ngIf;t.xp6(3),t.Q6J("formControl",r),t.xp6(1),t.Q6J("ngIf",r.hasError("required")),t.xp6(1),t.Q6J("ngIf",r.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",r.hasError("passwordRepetition"))}}function pt(e,o){1&e&&t._UZ(0,"camp-shadow-spinner")}const ct=[{path:"",redirectTo:"signin",pathMatch:"prefix"},{path:"signin",title:"Sign In",component:z,canActivate:[x.e]},{path:"signup",title:"Sign Up",component:(()=>{class e{constructor(){this.isSubmitting$=new g.X(!1),this.formBuilder=(0,t.f3M)(n.j3),this.authService=(0,t.f3M)(C.e),this.router=(0,t.f3M)(m.F0),this.route=(0,t.f3M)(m.gz),this.queryParamsService=(0,t.f3M)(A),this.untilDestroyed=(0,y.t)(),this.form=this.createForm()}createForm(){return this.formBuilder.group({email:["",[n.kI.required,n.kI.email]],firstName:["",[n.kI.required]],lastName:["",[n.kI.required]],password:["",[n.kI.required,n.kI.minLength(d.m.MIN_PASSWORD_LENGTH)]],repeatedPassword:["",[n.kI.required,n.kI.minLength(d.m.MIN_PASSWORD_LENGTH)]]},{validators:[d.m.passwordRepetition("password","repeatedPassword")]})}handleSubmit(){this.form.invalid||(this.isSubmitting$.next(!0),this.authService.register(this.form.getRawValue()).pipe((0,T.b)(()=>this.navigateToNextUrl()),function X(e){return function(o){return o.pipe((0,v.K)(r=>(r instanceof I.k&&Object.keys(e.controls).forEach(i=>{void 0!==r.errors[i]&&e.controls[i].setErrors({[G.O.AppErrorCode.ServerError]:r.errors[i]})}),(0,P._)(()=>r))))}}(this.form),(0,Z.x)(()=>this.isSubmitting$.next(!1)),this.untilDestroyed()).subscribe())}navigateToNextUrl(){this.router.navigateByUrl(this.queryParamsService.mapQueryParamsToUrl(this.route.snapshot.queryParams,"next"))}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["camp-register-page"]],decls:14,vars:9,consts:[[1,"typography-title"],[1,"auth-form",3,"formGroup","ngSubmit"],[4,"ngIf"],["class","password-field",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",1,"auth-form__submit-button"],["routerLink","/auth/signin","mat-button",""],["matInput","","placeholder","example@gmail.com","autocomplete","email",3,"formControl"],["matInput","","placeholder","John","autocomplete","given-name",3,"formControl"],["matInput","","placeholder","Doe","autocomplete","family-name",3,"formControl"],[1,"password-field"],["autocomplete","new-password",3,"formControl"]],template:function(r,i){1&r&&(t.TgZ(0,"p",0),t._uU(1,"Sign up"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return i.handleSubmit()}),t.YNc(3,k,7,4,"mat-form-field",2),t.YNc(4,et,5,2,"mat-form-field",2),t.YNc(5,ot,5,2,"mat-form-field",2),t.YNc(6,st,7,4,"mat-form-field",3),t.YNc(7,ut,7,4,"mat-form-field",3),t.TgZ(8,"button",4),t._uU(9,"Sign up"),t.qZA()(),t.TgZ(10,"a",5),t._uU(11,"Sign in"),t.qZA(),t.YNc(12,pt,1,0,"camp-shadow-spinner",2),t.ALo(13,"async")),2&r&&(t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("ngIf",i.form.controls.email),t.xp6(1),t.Q6J("ngIf",i.form.controls.firstName),t.xp6(1),t.Q6J("ngIf",i.form.controls.lastName),t.xp6(1),t.Q6J("ngIf",i.form.controls.password),t.xp6(1),t.Q6J("ngIf",i.form.controls.repeatedPassword),t.xp6(5),t.Q6J("ngIf",t.lcZ(13,7,i.isSubmitting$)))},dependencies:[f.O5,w.e,m.rH,n._Y,n.Fj,n.JJ,n.JL,n.oH,n.sg,s.KE,s.hX,s.TO,p.Nt,l.zs,l.lW,q,f.Ov,S.m],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--space-m);padding:var(--space-m)}.auth-form[_ngcontent-%COMP%]{display:flex;max-width:var(--auth-form-max-width);width:100%;flex-direction:column;gap:var(--space-s);justify-content:center}.auth-form__error[_ngcontent-%COMP%]{color:var(--primary-color);align-self:center}.auth-form__submit-button[_ngcontent-%COMP%]{align-self:center}"],changeDetection:0}),e})(),canActivate:[x.e]}];let gt=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(ct),m.Bz]}),e})(),ht=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[{provide:s.o2,useValue:{appearance:"outline"}}],imports:[f.ez,U.m,gt,n.UX,s.lN,p.c,l.ot,_.Ps]}),e})()}}]);