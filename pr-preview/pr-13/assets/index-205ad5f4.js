import{g as $,a as T,s as V,B as _,r as B,_ as g,b,l as M,c as o,u as E,d as A,L as w,e as z,f as D,j as a,h as G,i as H,k as F,m as U,t as W,n as q,o as Y,T as J,G as x,p as K,q as P,v as Q,w as X,x as Z,y as ee,z as se,A as te}from"./index-55a4f01b.js";import{F as ae,I as oe,C as ne,S as re,u as ie,T as le}from"./index.esm-14cfe239.js";const ce=$("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),O=ce,de=$("MuiListItemIcon",["root","alignItemsFlexStart"]),R=de;function pe(e){return T("MuiMenuItem",e)}const ue=$("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),m=ue,me=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],ge=(e,s)=>{const{ownerState:t}=e;return[s.root,t.dense&&s.dense,t.divider&&s.divider,!t.disableGutters&&s.gutters]},fe=e=>{const{disabled:s,dense:t,divider:n,disableGutters:r,selected:d,classes:i}=e,l=H({root:["root",t&&"dense",s&&"disabled",!r&&"gutters",n&&"divider",d&&"selected"]},pe,i);return g({},i,l)},be=V(_,{shouldForwardProp:e=>B(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:ge})(({theme:e,ownerState:s})=>g({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!s.disableGutters&&{paddingLeft:16,paddingRight:16},s.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${m.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:b(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${m.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:b(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${m.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:b(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:b(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${m.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${m.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${O.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${O.inset}`]:{marginLeft:52},[`& .${M.root}`]:{marginTop:0,marginBottom:0},[`& .${M.inset}`]:{paddingLeft:36},[`& .${R.root}`]:{minWidth:36}},!s.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},s.dense&&g({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${R.root} svg`]:{fontSize:"1.25rem"}}))),xe=o.forwardRef(function(s,t){const n=E({props:s,name:"MuiMenuItem"}),{autoFocus:r=!1,component:d="li",dense:i=!1,divider:p=!1,disableGutters:l=!1,focusVisibleClassName:y,role:v="menuitem",tabIndex:f,className:C}=n,c=A(n,me),u=o.useContext(w),S=o.useMemo(()=>({dense:i||u.dense||!1,disableGutters:l}),[u.dense,i,l]),I=o.useRef(null);z(()=>{r&&I.current&&I.current.focus()},[r]);const k=g({},n,{dense:S.dense,divider:p,disableGutters:l}),h=fe(n),N=D(I,t);let j;return n.disabled||(j=f!==void 0?f:-1),a.jsx(w.Provider,{value:S,children:a.jsx(be,g({ref:N,role:v,tabIndex:j,component:d,focusVisibleClassName:G(h.focusVisible,y),className:G(h.root,C)},c,{ownerState:k,classes:h}))})}),ye=xe,ve=F(e=>e.genres.genres,e=>e);F(e=>e.genres.isLoading,e=>e);class Ce{constructor({pageNumber:s,pageSize:t}){this.pageSize=t,this.pageNumber=s}}const Ie=(e,s,t)=>{o.useEffect(()=>{if(e&&s){const n={root:e,threshold:0},r=new IntersectionObserver(d=>{d.every(i=>i.isIntersecting)&&t()},n);return r.observe(s),()=>{r.disconnect()}}},[e,s])},he=({lastItemNode:e,onObserve:s,children:t})=>{const[n,r]=o.useState(null);Ie(n,e,s);const d=o.useCallback(i=>{r(i)},[]);return a.jsx(U,{ref:d,sx:{maxHeight:"100%",overflowY:"auto"},children:t})},$e=o.memo(he);class Se{constructor({field:s,direction:t}){this.field=s,this.direction=t}}const je=({items:e,title:s,control:t,name:n,toReadable:r})=>{const d=o.useId();return a.jsxs(ae,{sx:{m:1,width:300},children:[a.jsx(oe,{children:s}),a.jsx(ne,{control:t,name:n,render:({field:{onChange:i,...p}})=>a.jsx(re,{...p,id:d,multiple:!0,onChange:i,children:e.map(l=>a.jsx(ye,{value:l,children:r?r(l):l},l))})})]})},Me=W(je),we="_card_1r518_1",Ge={card:we},Oe=o.forwardRef(({genre:e},s)=>a.jsx(q,{ref:s,alignItems:"flex-start",className:Ge.card,children:a.jsx(Y,{primary:e.name,secondary:a.jsx(J,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:x.toReadable(e.type)})})})),Re=o.memo(Oe),Le="_aside_1lwpd_1",Fe={aside:Le},L={pagination:new Ce({pageSize:5,pageNumber:0}),sorting:new Se({field:K.None,direction:"asc"}),filters:new P({types:[],search:""})},Pe={types:[],search:""},ke=()=>{const e=Q(),s=X(ve),[t,n]=o.useState(L),[r,d]=o.useState(null),i=()=>{n(c=>({...c,pagination:{...c.pagination,pageNumber:c.pagination.pageNumber+1}}))};o.useEffect(()=>{e(Z())},[]),o.useEffect(()=>{e(ee(t))},[t]);const{register:p,handleSubmit:l,control:y}=ie({defaultValues:Pe}),v=({types:c,search:u})=>{e(te()),n({...L,filters:new P({types:c,search:u})})},f=o.useMemo(()=>x.toArray(),[x]),C=o.useCallback(c=>{d(c)},[]);return a.jsxs("aside",{className:Fe.aside,children:[a.jsxs("form",{onSubmit:l(v),children:[a.jsx(Me,{name:"types",toReadable:x.toReadable,control:y,items:f,title:"Filter"}),a.jsx(le,{label:"Search",...p("search")}),a.jsx(se,{type:"submit",children:"Submit"})]}),a.jsx($e,{lastItemNode:r,onObserve:i,children:s.map((c,u)=>a.jsx(Re,{ref:u===s.length-1?C:null,genre:c},c.id))})]})},Ve=o.memo(ke);export{Ve as GenresPage};
