import{g as $,a as T,s as V,B as _,r as B,_ as g,b,l as M,c as o,u as E,d as z,L as w,e as A,f as D,j as a,h as G,i as H,k as F,m as U,t as W,n as q,o as Y,T as J,G as x,p as K,q as P,v as Q,w as X,x as Z,y as ee,z as se}from"./index-2bebcab8.js";import{F as te,I as ae,C as oe,S as ne,u as re,T as ie}from"./index.esm-e10aca45.js";const le=$("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),O=le,ce=$("MuiListItemIcon",["root","alignItemsFlexStart"]),R=ce;function de(e){return T("MuiMenuItem",e)}const pe=$("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),m=pe,ue=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],me=(e,s)=>{const{ownerState:t}=e;return[s.root,t.dense&&s.dense,t.divider&&s.divider,!t.disableGutters&&s.gutters]},ge=e=>{const{disabled:s,dense:t,divider:n,disableGutters:r,selected:d,classes:i}=e,l=H({root:["root",t&&"dense",s&&"disabled",!r&&"gutters",n&&"divider",d&&"selected"]},de,i);return g({},i,l)},fe=V(_,{shouldForwardProp:e=>B(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:me})(({theme:e,ownerState:s})=>g({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!s.disableGutters&&{paddingLeft:16,paddingRight:16},s.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${m.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:b(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${m.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:b(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${m.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:b(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:b(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${m.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${m.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${O.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${O.inset}`]:{marginLeft:52},[`& .${M.root}`]:{marginTop:0,marginBottom:0},[`& .${M.inset}`]:{paddingLeft:36},[`& .${R.root}`]:{minWidth:36}},!s.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},s.dense&&g({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${R.root} svg`]:{fontSize:"1.25rem"}}))),be=o.forwardRef(function(s,t){const n=E({props:s,name:"MuiMenuItem"}),{autoFocus:r=!1,component:d="li",dense:i=!1,divider:p=!1,disableGutters:l=!1,focusVisibleClassName:y,role:v="menuitem",tabIndex:f,className:C}=n,c=z(n,ue),u=o.useContext(w),S=o.useMemo(()=>({dense:i||u.dense||!1,disableGutters:l}),[u.dense,i,l]),I=o.useRef(null);A(()=>{r&&I.current&&I.current.focus()},[r]);const k=g({},n,{dense:S.dense,divider:p,disableGutters:l}),h=ge(n),N=D(I,t);let j;return n.disabled||(j=f!==void 0?f:-1),a.jsx(w.Provider,{value:S,children:a.jsx(fe,g({ref:N,role:v,tabIndex:j,component:d,focusVisibleClassName:G(h.focusVisible,y),className:G(h.root,C)},c,{ownerState:k,classes:h}))})}),xe=be,ye=F(e=>e.genres.genres,e=>e);F(e=>e.genres.isLoading,e=>e);class ve{constructor({pageNumber:s,pageSize:t}){this.pageSize=t,this.pageNumber=s}}const Ce=(e,s,t)=>{o.useEffect(()=>{if(e&&s){const n={root:e,threshold:0},r=new IntersectionObserver(d=>{d.every(i=>i.isIntersecting)&&t()},n);return r.observe(s),()=>{r.disconnect()}}},[e,s])},Ie=({lastItemNode:e,onObserve:s,children:t})=>{const[n,r]=o.useState(null);Ce(n,e,s);const d=o.useCallback(i=>{r(i)},[]);return a.jsx(U,{ref:d,sx:{maxHeight:"100%",overflowY:"auto"},children:t})},he=o.memo(Ie);class $e{constructor({field:s,direction:t}){this.field=s,this.direction=t}}const Se=({items:e,title:s,control:t,name:n,toReadable:r})=>{const d=o.useId();return a.jsxs(te,{sx:{m:1,width:300},children:[a.jsx(ae,{children:s}),a.jsx(oe,{control:t,name:n,render:({field:{onChange:i,...p}})=>a.jsx(ne,{...p,id:d,multiple:!0,onChange:i,children:e.map(l=>a.jsx(xe,{value:l,children:r?r(l):l},l))})})]})},je=W(Se),Me="_card_1r518_1",we={card:Me},Ge=o.forwardRef(({genre:e},s)=>a.jsx(q,{ref:s,alignItems:"flex-start",className:we.card,children:a.jsx(Y,{primary:e.name,secondary:a.jsx(J,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:x.toReadable(e.type)})})})),Oe=o.memo(Ge),Re="_aside_1lwpd_1",Le={aside:Re},L={pagination:new ve({pageSize:5,pageNumber:0}),sorting:new $e({field:K.None,direction:"asc"}),filters:new P({types:[],search:""})},Fe={types:[],search:""},Pe=()=>{const e=Q(),s=X(ye),[t,n]=o.useState(L),[r,d]=o.useState(null),i=()=>{n(c=>({...c,pagination:{...c.pagination,pageNumber:c.pagination.pageNumber+1}}))};o.useEffect(()=>{e(Z(t))},[t]);const{register:p,handleSubmit:l,control:y}=re({defaultValues:Fe}),v=({types:c,search:u})=>{e(se()),n({...L,filters:new P({types:c,search:u})})},f=o.useMemo(()=>x.toArray(),[x]),C=o.useCallback(c=>{d(c)},[]);return a.jsxs("aside",{className:Le.aside,children:[a.jsxs("form",{onSubmit:l(v),children:[a.jsx(je,{name:"types",toReadable:x.toReadable,control:y,items:f,title:"Filter"}),a.jsx(ie,{label:"Search",...p("search")}),a.jsx(ee,{type:"submit",children:"Submit"})]}),a.jsx(he,{lastItemNode:r,onObserve:i,children:s.map((c,u)=>a.jsx(Oe,{ref:u===s.length-1?C:null,genre:c},c.id))})]})},Te=o.memo(Pe);export{Te as GenresPage};
