import{c as A,r as a,j as e,L as v,A as M,a as R,T as u,b as l,d as c,u as D,e as x,f as E,g as O,B as g,D as B,h as k,i as V,O as z,k as J}from"./index-cf12006b.js";import{u as U,T as $,I as q}from"./index.esm-7598b830.js";import{M as G,a as H,b as K,I as Q,P as W}from"./InfinityScroll-f0a4dacc.js";import{D as X}from"./listItemIconClasses-dc52ff66.js";import"./GlobalStyles-f739a025.js";const Y=A(s=>s.anime.anime,s=>s),Z=A(s=>s.anime.isLoading,s=>s);class y{constructor({types:n,search:i}){this.types=n,this.search=i}}const ee="_aside_1iiw9_1",se="_form_1iiw9_13",h={aside:ee,form:se},te="_animeCard_4hl45_1",ae="_animeAvatar_4hl45_12",f={animeCard:te,animeAvatar:ae},ne=a.forwardRef(({anime:s},n)=>e.jsxs(v,{ref:n,className:f.animeCard,children:[e.jsx(M,{className:f.animeAvatar,src:s.imageUrl}),e.jsx(R,{primary:e.jsxs(u,{component:"h4",variant:"body2",color:"text.primary",children:[s.titleJapanese,e.jsx("br",{}),s.titleEnglish]}),secondary:e.jsxs(u,{component:"span",variant:"body2",color:"text.primary",children:["Type: ",l.toReadable(s.type),e.jsx("br",{}),"Status: ",s.status]})})]})),ie=a.memo(ne),b=[{field:c.TitleEnglish,direction:""},{field:c.Status,direction:""}],j={pagination:new W({pageSize:15,pageNumber:0}),sorting:b,filters:new y({types:[],search:""})},oe={types:[],search:"",sorting:b},re=()=>{const s=D(),n=x(Y),i=x(Z),[S,L]=a.useState(!1),[m,d]=a.useState(j),[_,C]=a.useState(null),N=()=>{d(t=>({...t,pagination:{...t.pagination,pageNumber:t.pagination.pageNumber+1}}))};a.useEffect(()=>{s(E())},[]),a.useEffect(()=>{s(O(m))},[m]);const{register:I,handleSubmit:P,control:p}=U({defaultValues:oe}),o=()=>{L(t=>!t)},w=({types:t,search:r,sorting:T})=>{s(J()),d({...j,sorting:T,filters:new y({types:t,search:r})}),o()},F=a.useCallback(t=>{C(t)},[]);return e.jsxs(g,{sx:{flex:1,display:"flex"},children:[e.jsx(B,{open:S,onClose:o,children:e.jsxs("form",{className:h.form,onSubmit:P(w),children:[e.jsx($,{label:"Search",...I("search")}),e.jsx(G,{name:"types",toReadable:l.toReadable,control:p,items:l.toArray(),title:"Filter"}),e.jsx(H,{name:"sorting",control:p,title:"Sorting",toReadable:c.toReadable}),e.jsx(k,{type:"submit",children:"Apply"})]})}),e.jsxs("aside",{className:h.aside,children:[e.jsx(q,{onClick:o,children:e.jsx(K,{})}),e.jsx(Q,{lastItemNode:_,onObserve:N,children:e.jsxs(e.Fragment,{children:[i&&n.length===0&&e.jsx(V,{}),n.map((t,r)=>e.jsxs(g,{children:[e.jsx(ie,{ref:r===n.length-1?F:null,anime:t}),e.jsx(X,{})]},t.id))]})})]}),e.jsx(z,{})]})},ue=a.memo(re);export{ue as AnimePage};
