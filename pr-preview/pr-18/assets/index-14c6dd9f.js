import{r as t,u as _,j as a,D as w,A as d,a as h,B as F,c as I,b,t as E,L as f,d as x,e as C,T as p,f as j,g as M,h as S,i as T,k,O}from"./index-16bd4c53.js";import{P as v,M as B,a as W,I as q,D as $}from"./InfinityScroll-ff4557e0.js";import{u as z,T as J,I as U}from"./index.esm-e6f1bb5c.js";import{M as V}from"./MultipleSelect-f2e64b73.js";class N{constructor({types:s,search:n}){this.types=s,this.search=n}}var y=(e=>(e.ChangePagination="change_pagination",e.ChangeSorting="change_sorting",e.ChangeFilter="change_filter",e.ChangeFilterAndSorting="change_filter_and_sorting",e))(y||{});const G=(e,s)=>{switch(s.type){case"change_pagination":return{...e,pagination:new v({...e.pagination,pageNumber:e.pagination.pageNumber+1})};case"change_sorting":return{...e,pagination:s.payload.defaultPagination,sorting:s.payload.sorting};case"change_filter":return{...e,pagination:s.payload.defaultPagination,filters:s.payload.filters};case"change_filter_and_sorting":return{...e,pagination:s.payload.defaultPagination,filters:s.payload.filters,sorting:s.payload.sorting};default:return e}},H="_pageWrapper_fzkaq_1",K={pageWrapper:H},Q="_form_1pkbk_1",X={form:Q},Y=({isOpened:e,toggleMenu:s,paramsDispatch:n,defaultFormValues:i,defaultParams:l})=>{const o=_(),{register:c,handleSubmit:g,control:r}=z({defaultValues:i}),u=({types:P,search:R,sorting:D})=>{o(I()),n({type:y.ChangeFilterAndSorting,payload:{sorting:D,defaultPagination:l.pagination,filters:new N({types:P,search:R})}}),s()};return a.jsx(w,{open:e,onClose:s,children:a.jsxs("form",{className:X.form,onSubmit:g(u),children:[a.jsx(J,{label:"Search",...c("search")}),a.jsx(V,{name:"types",toReadable:d.toReadable,control:r,items:d.toArray(),title:"Filter"}),a.jsx(B,{name:"sorting",control:r,title:"Sorting",toReadable:h.toReadable}),a.jsx(F,{type:"submit",children:"Apply"})]})})},Z=t.memo(Y),ee=b(e=>e.anime.anime,e=>e),ae=b(e=>e.anime.isLoading,e=>e),se=()=>a.jsx(f,{children:a.jsx(x,{primary:"Try more!",secondary:"Nothing found"})}),te=E(se),ne="_aside_i7p1g_1",re={aside:ne},ie="_animeCard_hvndq_1",oe="_animeAvatar_hvndq_12",m={animeCard:ie,animeAvatar:oe},le=({anime:e})=>a.jsxs(f,{className:m.animeCard,children:[a.jsx(C,{className:m.animeAvatar,src:e.imageUrl}),a.jsx(x,{primary:a.jsxs(p,{component:"h4",variant:"body2",children:[e.titleJapanese,a.jsx("br",{}),e.titleEnglish]}),secondary:a.jsxs(p,{component:"span",variant:"body2",children:["Type: ",d.toReadable(e.type),a.jsx("br",{}),"Status: ",e.status]})})]}),ce=t.memo(le),de=t.forwardRef(({anime:e},s)=>a.jsxs(f,{ref:s,className:m.animeCard,children:[a.jsx(C,{className:m.animeAvatar,src:e.imageUrl}),a.jsx(x,{primary:a.jsxs(p,{component:"h4",variant:"body2",children:[e.titleJapanese,a.jsx("br",{}),e.titleEnglish]}),secondary:a.jsxs(p,{component:"span",variant:"body2",children:["Type: ",d.toReadable(e.type),a.jsx("br",{}),"Status: ",e.status]})})]})),pe=t.memo(de),me=({toggleMenu:e,paramsDispatch:s})=>{const n=j(ee),i=j(ae),[l,o]=t.useState(null),c=()=>{s({type:y.ChangePagination})},g=t.useCallback(r=>{o(r)},[]);return a.jsxs("aside",{className:re.aside,children:[i&&n.length===0&&a.jsx(M,{}),a.jsx(U,{onClick:e,children:a.jsx(W,{})}),a.jsxs(q,{lastItemNode:l,onObserve:c,children:[n.length===0&&!i&&a.jsx(te,{}),n.map((r,u)=>a.jsxs(S,{children:[u===n.length-1?a.jsx(ce,{anime:r}):a.jsx(pe,{ref:g,anime:r}),a.jsx($,{})]},r.id))]})]})},ge=t.memo(me),L=[{field:h.TitleEnglish,direction:""},{field:h.Status,direction:""}],A={pagination:new v({pageSize:15,pageNumber:0}),sorting:L,filters:new N({types:[],search:""})},ue={types:[],search:"",sorting:L},he=()=>{const e=_(),[s,n]=t.useReducer(G,A);t.useEffect(()=>{e(T())},[]),t.useEffect(()=>{e(k(s))},[s]);const[i,l]=t.useState(!1),o=()=>{l(c=>!c)};return a.jsxs(S,{className:K.pageWrapper,children:[a.jsx(Z,{paramsDispatch:n,toggleMenu:o,isOpened:i,defaultFormValues:ue,defaultParams:A}),a.jsx(ge,{paramsDispatch:n,toggleMenu:o}),a.jsx(O,{})]})},Ae=t.memo(he);export{Ae as AnimePage};
