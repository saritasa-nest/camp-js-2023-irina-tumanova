import{r as n,u as A,j as e,D as N,A as d,a as u,B as I,c as P,b as j,L as v,d as w,e as D,T as g,f as h,g as F,h as b,i as T,k as M,O as R}from"./index-4252a463.js";import{M as k,a as E,I as O,D as B,P as W}from"./InfinityScroll-c44a18ca.js";import{u as q,T as $,I as z}from"./index.esm-6e24e4c6.js";import{M as V}from"./MultipleSelect-667da7d0.js";class y{constructor({types:t,search:i}){this.types=t,this.search=i}}const J="_pageWrapper_fzkaq_1",U={pageWrapper:J},G="_form_1pkbk_1",H={form:G},K=({isOpened:s,toggleMenu:t,setParameters:i,defaultFormValues:r,defaultParams:c})=>{const o=A(),{register:m,handleSubmit:l,control:a}=q({defaultValues:r}),p=({types:_,search:L,sorting:C})=>{o(P()),i({...c,sorting:C,filters:new y({types:_,search:L})}),t()};return e.jsx(N,{open:s,onClose:t,children:e.jsxs("form",{className:H.form,onSubmit:l(p),children:[e.jsx($,{label:"Search",...m("search")}),e.jsx(V,{name:"types",toReadable:d.toReadable,control:a,items:d.toArray(),title:"Filter"}),e.jsx(k,{name:"sorting",control:a,title:"Sorting",toReadable:u.toReadable}),e.jsx(I,{type:"submit",children:"Apply"})]})})},Q=n.memo(K),X=j(s=>s.anime.anime,s=>s),Y=j(s=>s.anime.isLoading,s=>s),Z="_aside_i7p1g_1",ee={aside:Z},se="_animeCard_hvndq_1",te="_animeAvatar_hvndq_12",x={animeCard:se,animeAvatar:te},ae=n.forwardRef(({anime:s},t)=>e.jsxs(v,{ref:t,className:x.animeCard,children:[e.jsx(w,{className:x.animeAvatar,src:s.imageUrl}),e.jsx(D,{primary:e.jsxs(g,{component:"h4",variant:"body2",children:[s.titleJapanese,e.jsx("br",{}),s.titleEnglish]}),secondary:e.jsxs(g,{component:"span",variant:"body2",children:["Type: ",d.toReadable(s.type),e.jsx("br",{}),"Status: ",s.status]})})]})),ne=n.memo(ae),ie=({toggleMenu:s,setParameters:t})=>{const i=h(X),r=h(Y),[c,o]=n.useState(null),m=()=>{t(a=>({...a,pagination:{...a.pagination,pageNumber:a.pagination.pageNumber+1}}))},l=n.useCallback(a=>{o(a)},[]);return e.jsxs("aside",{className:ee.aside,children:[e.jsx(z,{onClick:s,children:e.jsx(E,{})}),e.jsx(O,{lastItemNode:c,onObserve:m,children:e.jsxs(e.Fragment,{children:[r&&i.length===0&&e.jsx(F,{}),i.map((a,p)=>e.jsxs(b,{children:[e.jsx(ne,{ref:p===i.length-1?l:null,anime:a}),e.jsx(B,{})]},a.id))]})})]})},oe=n.memo(ie),S=[{field:u.TitleEnglish,direction:""},{field:u.Status,direction:""}],f={pagination:new W({pageSize:15,pageNumber:0}),sorting:S,filters:new y({types:[],search:""})},re={types:[],search:"",sorting:S},ce=()=>{const s=A(),[t,i]=n.useState(f);n.useEffect(()=>{s(T())},[]),n.useEffect(()=>{s(M(t))},[t]);const[r,c]=n.useState(!1),o=()=>{c(m=>!m)};return e.jsxs(b,{className:U.pageWrapper,children:[e.jsx(Q,{setParameters:i,toggleMenu:o,isOpened:r,defaultFormValues:re,defaultParams:f}),e.jsx(oe,{setParameters:i,toggleMenu:o}),e.jsx(R,{})]})},ue=n.memo(ce);export{ue as AnimePage};
