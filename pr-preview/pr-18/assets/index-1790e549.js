import{c as y,r as a,l as F,u as b,e as m,s as T,j as e,L as M,a as R,T as A,G as p,m as E,n as u,o as O,p as v,B as f,D as B,h as k,i as V,O as $,q}from"./index-8d4cfe93.js";import{u as z,T as H,I as J}from"./index.esm-2343ab60.js";import{M as K,a as Q,b as U,I as W,P as X}from"./InfinityScroll-10e60a22.js";import{D as Y}from"./listItemIconClasses-626f2f8f.js";import"./GlobalStyles-f12eb909.js";const Z=y(s=>s.genres.genres,s=>s),ee=y(s=>s.genres.isLoading,s=>s);class S{constructor({types:n,search:r}){this.types=n,this.search=r}}const se={"card-container":"_card-container_16fj8_1"},te=a.forwardRef(({genre:s},n)=>{const r=F(),i=b(),c=m(T),o=()=>{c&&i(E()),r(`${s.id}`)};return e.jsx(M,{className:se["card-container"],ref:n,onClick:o,children:e.jsx(R,{primary:s.name,secondary:e.jsx(A,{component:"span",variant:"body2",color:"text.primary",children:p.toReadable(s.type)})})})}),ae=a.memo(te),ne="_aside_1iiw9_1",re="_form_1iiw9_13",h={aside:ne,form:re},G=[{field:u.Name,direction:""},{field:u.Type,direction:""}],j={pagination:new X({pageSize:15,pageNumber:0}),sorting:G,filters:new S({types:[],search:""})},oe={types:[],search:"",sorting:G},ie=()=>{const s=b(),n=m(Z),r=m(ee),[i,c]=a.useState(!1),[o,g]=a.useState(j),[N,I]=a.useState(null),D=()=>{g(t=>({...t,pagination:{...t.pagination,pageNumber:t.pagination.pageNumber+1}}))};a.useEffect(()=>{s(O())},[]),a.useEffect(()=>{s(v(o))},[o]);const{register:L,handleSubmit:P,control:x}=z({defaultValues:oe}),l=()=>{c(t=>!t)},_=({types:t,search:d,sorting:C})=>{s(q()),g({...j,sorting:C,filters:new S({types:t,search:d})}),l()},w=a.useCallback(t=>{I(t)},[]);return e.jsxs(f,{sx:{flex:1,display:"flex"},children:[e.jsx(B,{open:i,onClose:l,children:e.jsxs("form",{className:h.form,onSubmit:P(_),children:[e.jsx(H,{label:"Search",...L("search")}),e.jsx(K,{name:"types",title:"Filter",toReadable:p.toReadable,control:x,items:p.toArray()}),e.jsx(Q,{name:"sorting",title:"Sorting",control:x,toReadable:u.toReadable}),e.jsx(k,{type:"submit",children:"Apply"})]})}),e.jsxs("aside",{className:h.aside,children:[e.jsx(J,{onClick:l,children:e.jsx(U,{})}),e.jsx(W,{lastItemNode:N,onObserve:D,children:e.jsxs(e.Fragment,{children:[r&&n.length===0&&e.jsx(V,{}),n.map((t,d)=>e.jsxs(f,{children:[e.jsx(ae,{ref:d===n.length-1?w:null,genre:t}),e.jsx(Y,{})]},t.id))]})})]}),e.jsx($,{})]})},ue=a.memo(ie);export{ue as GenresPage};
