import{c as b,r as t,j as e,L as M,A as R,a as w,T as g,b as c,d as m,u as D,e as h,f as E,g as O,B as x,D as B,h as W,i as k,O as V,k as z}from"./index-a5d0a350.js";import{u as J,T as U,I as $}from"./index.esm-1a2899a8.js";import{M as q,a as G,b as H,I as K,P as Q}from"./InfinityScroll-c6640359.js";import{D as X}from"./listItemIconClasses-8a827bea.js";import"./GlobalStyles-ddedacb3.js";const Y=b(s=>s.anime.anime,s=>s),Z=b(s=>s.anime.isLoading,s=>s);class A{constructor({types:n,search:i}){this.types=n,this.search=i}}const ee="_pageWrapper_13y5b_1",se="_aside_13y5b_6",ae="_form_13y5b_18",l={pageWrapper:ee,aside:se,form:ae},te="_animeCard_4hl45_1",ne="_animeAvatar_4hl45_12",f={animeCard:te,animeAvatar:ne},ie=t.forwardRef(({anime:s},n)=>e.jsxs(M,{ref:n,className:f.animeCard,children:[e.jsx(R,{className:f.animeAvatar,src:s.imageUrl}),e.jsx(w,{primary:e.jsxs(g,{component:"h4",variant:"body2",children:[s.titleJapanese,e.jsx("br",{}),s.titleEnglish]}),secondary:e.jsxs(g,{component:"span",variant:"body2",children:["Type: ",c.toReadable(s.type),e.jsx("br",{}),"Status: ",s.status]})})]})),re=t.memo(ie),y=[{field:m.TitleEnglish,direction:""},{field:m.Status,direction:""}],j={pagination:new Q({pageSize:15,pageNumber:0}),sorting:y,filters:new A({types:[],search:""})},oe={types:[],search:"",sorting:y},le=()=>{const s=D(),n=h(Y),i=h(Z),[S,_]=t.useState(!1),[p,d]=t.useState(j),[L,N]=t.useState(null),C=()=>{d(a=>({...a,pagination:{...a.pagination,pageNumber:a.pagination.pageNumber+1}}))};t.useEffect(()=>{s(E())},[]),t.useEffect(()=>{s(O(p))},[p]);const{register:I,handleSubmit:P,control:u}=J({defaultValues:oe}),r=()=>{_(a=>!a)},F=({types:a,search:o,sorting:v})=>{s(z()),d({...j,sorting:v,filters:new A({types:a,search:o})}),r()},T=t.useCallback(a=>{N(a)},[]);return e.jsxs(x,{className:l.pageWrapper,children:[e.jsx(B,{open:S,onClose:r,children:e.jsxs("form",{className:l.form,onSubmit:P(F),children:[e.jsx(U,{label:"Search",...I("search")}),e.jsx(q,{name:"types",toReadable:c.toReadable,control:u,items:c.toArray(),title:"Filter"}),e.jsx(G,{name:"sorting",control:u,title:"Sorting",toReadable:m.toReadable}),e.jsx(W,{type:"submit",children:"Apply"})]})}),e.jsxs("aside",{className:l.aside,children:[e.jsx($,{onClick:r,children:e.jsx(H,{})}),e.jsx(K,{lastItemNode:L,onObserve:C,children:e.jsxs(e.Fragment,{children:[i&&n.length===0&&e.jsx(k,{}),n.map((a,o)=>e.jsxs(x,{children:[e.jsx(re,{ref:o===n.length-1?T:null,anime:a}),e.jsx(X,{})]},a.id))]})})]}),e.jsx(V,{})]})},ge=t.memo(le);export{ge as AnimePage};
