import{q as P,p as F,t as k,_ as p,r as o,z as R,C as D,E as T,j as s,I as E,J as O,b as v,Y as B,u as L,e as f,a4 as U,L as z,a5 as $,g as V,T as W,a6 as q,a7 as S,a8 as J,a9 as Y,m as h,D as G,B as H,n as K,O as Q,aa as X}from"./index-cdb999f4.js";import{u as Z,T as tt}from"./index.esm-91b39be2.js";import{M as st,P as et}from"./MultipleSort-f0c7f36f.js";import{M as at,I as ot,D as rt}from"./InfinityScroll-27efa454.js";import{I as it}from"./IconButton-b8a429ea.js";function nt(t){return P("MuiListItemAvatar",t)}F("MuiListItemAvatar",["root","alignItemsFlexStart"]);const lt=["className"],ct=t=>{const{alignItems:e,classes:r}=t;return O({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},nt,r)},mt=k("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({ownerState:t})=>p({minWidth:56,flexShrink:0},t.alignItems==="flex-start"&&{marginTop:8})),dt=o.forwardRef(function(e,r){const i=R({props:e,name:"MuiListItemAvatar"}),{className:n}=i,l=D(i,lt),c=o.useContext(T),m=p({},i,{alignItems:c.alignItems}),d=ct(m);return s.jsx(mt,p({className:E(d.root,n),ownerState:m,ref:r},l))}),ut=dt,gt=v(t=>t.studios.studios,t=>t),xt=v(t=>t.studios.isLoading,t=>t);class C{constructor({search:e}){this.search=e}}const pt="_aside_1iiw9_1",ft="_form_1iiw9_13",I={aside:pt,form:ft},St=o.forwardRef((t,e)=>s.jsx(B,{ref:e,...t,children:t.children})),ht="_studioCard_1uc4k_1",It="_avatar_1uc4k_11",jt="_avatarImg_1uc4k_16",x={studioCard:ht,avatar:It,avatarImg:jt},vt=o.forwardRef(({studio:t},e)=>{const r=L(),i=f(U),n=()=>{i&&r(q())};return s.jsxs(z,{className:x.studioCard,ref:e,component:St,to:`${t.id}`,onClick:n,children:[s.jsx(ut,{className:x.avatar,children:s.jsx($,{alt:"Studio cover",src:t.thumbnailImg,className:x.avatarImg})}),s.jsx(V,{primary:s.jsx(W,{fontSize:17,children:t.name})})]})}),Lt=o.memo(vt),N=[{field:S.Name,direction:""},{field:S.Modified,direction:""}],j={pagination:new et({pageSize:15,pageNumber:0}),sorting:N,filters:new C({search:""})},Ct={search:"",sorting:N},Nt=()=>{const t=L(),e=f(gt),r=f(xt),[i,n]=o.useState(!1),[l,c]=o.useState(j),[m,d]=o.useState(null);o.useEffect(()=>{t(J())},[]),o.useEffect(()=>{t(Y(l))},[l]);const{register:_,handleSubmit:b,control:A}=Z({defaultValues:Ct}),w=()=>{c(a=>({...a,pagination:{...a.pagination,pageNumber:a.pagination.pageNumber+1}}))},u=()=>{n(a=>!a)},y=({search:a,sorting:g})=>{t(X()),c({...j,sorting:g,filters:new C({search:a})}),u()},M=o.useCallback(a=>{d(a)},[]);return s.jsxs(h,{sx:{flex:1,display:"flex"},children:[s.jsx(G,{open:i,onClose:u,children:s.jsxs("form",{className:I.form,onSubmit:b(y),children:[s.jsx(tt,{label:"Search",..._("search")}),s.jsx(st,{name:"sorting",control:A,title:"Sorting",toReadable:S.toReadable}),s.jsx(H,{type:"submit",children:"Apply"})]})}),s.jsxs("aside",{className:I.aside,children:[s.jsx(it,{onClick:u,children:s.jsx(at,{})}),s.jsx(ot,{lastItemNode:m,onObserve:w,children:s.jsxs(s.Fragment,{children:[r&&e.length===0&&s.jsx(K,{}),e.map((a,g)=>s.jsxs(h,{children:[s.jsx(Lt,{ref:g===e.length-1?M:null,studio:a}),s.jsx(rt,{})]},a.id))]})})]}),s.jsx(Q,{})]})},Mt=o.memo(Nt);export{Mt as StudiosPage};
