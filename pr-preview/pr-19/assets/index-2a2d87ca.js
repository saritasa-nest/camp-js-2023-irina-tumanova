import{q as P,p as F,t as D,_ as x,r as o,z as R,C as T,E as k,j as s,I as E,J as O,b as v,d as B,u as C,e as f,a4 as U,L as z,a5 as $,g as V,T as W,a6 as q,a7 as S,a8 as J,a9 as G,m as h,D as H,B as K,n as Q,O as X,aa as Y}from"./index-fa4a41bb.js";import{u as Z,T as tt}from"./index.esm-ac9fd6ba.js";import{M as st,P as et}from"./MultipleSort-7645cfa3.js";import{M as at,I as ot,D as rt}from"./InfinityScroll-f1ac3fff.js";import{I as it}from"./IconButton-b75ac976.js";function nt(t){return P("MuiListItemAvatar",t)}F("MuiListItemAvatar",["root","alignItemsFlexStart"]);const lt=["className"],ct=t=>{const{alignItems:e,classes:r}=t;return O({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},nt,r)},dt=D("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({ownerState:t})=>x({minWidth:56,flexShrink:0},t.alignItems==="flex-start"&&{marginTop:8})),mt=o.forwardRef(function(e,r){const i=R({props:e,name:"MuiListItemAvatar"}),{className:l}=i,n=T(i,lt),c=o.useContext(k),d=x({},i,{alignItems:c.alignItems}),m=ct(d);return s.jsx(dt,x({className:E(m.root,l),ownerState:d,ref:r},n))}),ut=mt,gt=v(t=>t.studios.studios,t=>t),pt=v(t=>t.studios.isLoading,t=>t);class L{constructor({search:e}){this.search=e}}const xt="_aside_138wd_1",ft="_form_138wd_10",I={aside:xt,form:ft},St="_studioCard_1uc4k_1",ht="_avatar_1uc4k_11",It="_avatarImg_1uc4k_16",p={studioCard:St,avatar:ht,avatarImg:It},jt=o.forwardRef(({studio:t},e)=>{const r=B(),i=C(),l=f(U),n=()=>{l&&i(q()),r(`${t.id}`)};return s.jsxs(z,{ref:e,className:p.studioCard,onClick:n,children:[s.jsx(ut,{className:p.avatar,children:s.jsx($,{alt:"Studio cover",src:t.thumbnailImg,className:p.avatarImg})}),s.jsx(V,{primary:s.jsx(W,{fontSize:17,children:t.name})})]})}),vt=o.memo(jt),_=[{field:S.Name,direction:""},{field:S.Modified,direction:""}],j={pagination:new et({pageSize:15,pageNumber:0}),sorting:_,filters:new L({search:""})},Ct={search:"",sorting:_},Lt=()=>{const t=C(),e=f(gt),r=f(pt),[i,l]=o.useState(!1),[n,c]=o.useState(j),[d,m]=o.useState(null);o.useEffect(()=>{t(J())},[]),o.useEffect(()=>{t(G(n))},[n]);const{register:N,handleSubmit:b,control:A}=Z({defaultValues:Ct}),y=()=>{c(a=>({...a,pagination:{...a.pagination,pageNumber:a.pagination.pageNumber+1}}))},u=()=>{l(a=>!a)},w=({search:a,sorting:g})=>{t(Y()),c({...j,sorting:g,filters:new L({search:a})}),u()},M=o.useCallback(a=>{m(a)},[]);return s.jsxs(h,{sx:{flex:1,display:"flex"},children:[s.jsx(H,{open:i,onClose:u,children:s.jsxs("form",{className:I.form,onSubmit:b(w),children:[s.jsx(tt,{label:"Search",...N("search")}),s.jsx(st,{name:"sorting",control:A,title:"Sorting",toReadable:S.toReadable}),s.jsx(K,{type:"submit",children:"Apply"})]})}),s.jsxs("aside",{className:I.aside,children:[s.jsx(it,{onClick:u,children:s.jsx(at,{})}),s.jsx(ot,{lastItemNode:d,onObserve:y,children:s.jsxs(s.Fragment,{children:[r&&e.length===0&&s.jsx(Q,{}),e.map((a,g)=>s.jsxs(h,{children:[s.jsx(vt,{ref:g===e.length-1?M:null,studio:a}),s.jsx(rt,{})]},a.id))]})})]}),s.jsx(X,{})]})},wt=o.memo(Lt);export{wt as StudiosPage};
