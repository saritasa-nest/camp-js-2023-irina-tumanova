"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[798],{1798:(Tr,Z,a)=>{a.r(Z),a.d(Z,{AuthModule:()=>xr});var p,t,d=a(89),g=a(2074),L=a(2924),s=a(3810),i=a(6652),u=a(1300),P=a(2151),m=a(4162),v=a(4926),r=a(4355),C=a(1507),x=a(4121),O=a(9676),y=a(8168),A=a(3568),I=a(5490),w=a(3787),E=a(2522),q=a(447),_=a(4924);(t=p||(p={})).MIN_PASSWORD_LENGTH=8,t.passwordRepetition=function o(n,l){return T=>{if(T instanceof i.cw){const R=T.controls[n],h=T.controls[l];if(void 0===R||void 0===h)return null;let f=h.errors;R.value!==h.value?f={...f,[_.O.AppErrorCode.PasswordRepetition]:!0}:null!==f&&(delete f[_.O.AppErrorCode.PasswordRepetition],0===Object.keys(f).length&&(f=null)),h.setErrors(f)}return null}},t.requiredImageUrl=function e(n){return l=>l instanceof i.NI?null!==n?.value||null!==l.value?null:{[_.O.AppErrorCode.RequiredImage]:!0}:null};let U=(()=>{class t{mapQueryParamsToUrl(e,n){return decodeURIComponent(e[n]??"")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var N=a(8598),Q=a(9779),M=a(8801);let J=(()=>{class t extends Q.y{constructor(e){super(),this._focusMonitor=e,this.autocomplete="",this.controlType="password-input",this.isPasswordHidden=!0,e.monitor(this._elementRef,!0).subscribe(n=>{this.focused&&!n&&this.onTouched(),this.focused=!!n,this.stateChanges.next()})}checkValueIsEmpty(e){return null===e||0===e.trim().length}changePasswordVisibility(){this.isPasswordHidden=!this.isPasswordHidden}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(M.tE))},t.\u0275cmp=r.Xpm({type:t,selectors:[["camp-password-field"]],inputs:{autocomplete:"autocomplete"},features:[r._Bn([{provide:s.Eo,useExisting:t}]),r.qOj],decls:4,vars:6,consts:[["matInput","",3,"type","autocomplete","formControl"],["mat-icon-button","","matSuffix","","type","button",1,"password-visibility-button",3,"click"]],template:function(e,n){1&e&&(r._UZ(0,"input",0),r.TgZ(1,"button",1),r.NdJ("click",function(){return n.changePasswordVisibility()}),r.TgZ(2,"mat-icon"),r._uU(3),r.qZA()()),2&e&&(r.Q6J("type",n.isPasswordHidden?"password":"text")("autocomplete",n.autocomplete)("formControl",n.formControl),r.xp6(1),r.uIk("aria-label","Hide password")("aria-pressed",n.isPasswordHidden),r.xp6(2),r.Oqu(n.isPasswordHidden?"visibility_off":"visibility"))},dependencies:[i.Fj,i.JJ,i.oH,s.R9,g.Nt,u.RK,P.Hw],styles:[".password-visibility-button[_ngcontent-%COMP%]{position:absolute;right:0;top:4px}.password-visibility-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff}"],changeDetection:0}),t})();var S=a(2302);function Y(t,o){if(1&t&&(r.ynx(0),r.TgZ(1,"p",6),r._uU(2),r.qZA(),r.BQk()),2&t){const e=o.ngIf;r.xp6(2),r.hij(" ",e.errors.common," ")}}function F(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.Oqu(r.xi3(2,1,"required","email")))}function j(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"email")))}function H(t,o){if(1&t&&(r.TgZ(0,"mat-form-field")(1,"mat-label"),r._uU(2,"Email"),r.qZA(),r._UZ(3,"input",7),r.YNc(4,F,3,4,"mat-error",2),r.YNc(5,j,3,3,"mat-error",2),r.qZA()),2&t){const e=o.ngIf;r.xp6(3),r.Q6J("formControl",e),r.xp6(1),r.Q6J("ngIf",e.hasError("required")),r.xp6(1),r.Q6J("ngIf",e.hasError("email"))}}function B(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.Oqu(r.xi3(2,1,"required","password")))}function D(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.hij("",r.lcZ(2,1,"minlength")," 8"))}function $(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.Oqu(r.xi3(2,1,"passwordRepetition","password")))}function z(t,o){if(1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&t){const e=o.ngIf;r.xp6(1),r.Oqu(e)}}function X(t,o){if(1&t&&(r.TgZ(0,"mat-form-field",8)(1,"mat-label"),r._uU(2,"Password"),r.qZA(),r._UZ(3,"camp-password-field",9),r.YNc(4,B,3,4,"mat-error",2),r.YNc(5,D,3,3,"mat-error",2),r.YNc(6,$,3,4,"mat-error",2),r.YNc(7,z,2,1,"mat-error",2),r.qZA()),2&t){const e=o.ngIf;r.xp6(3),r.Q6J("formControl",e),r.xp6(1),r.Q6J("ngIf",e.hasError("required")),r.xp6(1),r.Q6J("ngIf",e.hasError("minlength")),r.xp6(1),r.Q6J("ngIf",e.hasError("passwordRepetition")),r.xp6(1),r.Q6J("ngIf",e.getError("serverError"))}}function G(t,o){1&t&&r._UZ(0,"camp-shadow-spinner")}let V=(()=>{class t{constructor(){this.isSubmitting$=new x.X(!1),this.loginErrors$=new x.X(null),this.formBuilder=(0,r.f3M)(i.j3),this.authService=(0,r.f3M)(C.e),this.untilDestroyed=(0,E.t)(),this.router=(0,r.f3M)(m.F0),this.route=(0,r.f3M)(m.gz),this.queryParamsService=(0,r.f3M)(U),this.form=this.createForm()}ngOnInit(){this.form.valueChanges.pipe(this.untilDestroyed()).subscribe(()=>this.loginErrors$.next(null))}createForm(){return this.formBuilder.group({email:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required,i.kI.minLength(p.MIN_PASSWORD_LENGTH)]]})}handleSubmit(){this.form.invalid||(this.isSubmitting$.next(!0),this.authService.login(this.form.getRawValue()).pipe((0,O.P)(),(0,y.b)(()=>this.navigateToNextUrl()),(0,A.K)(e=>this.handleError(e)),(0,I.x)(()=>this.isSubmitting$.next(!1)),this.untilDestroyed()).subscribe())}navigateToNextUrl(){this.router.navigateByUrl(this.queryParamsService.mapQueryParamsToUrl(this.route.snapshot.queryParams,"next"))}handleError(e){return e instanceof q.k&&this.loginErrors$.next(e??null),(0,w._)(()=>e)}trackErrorByIndex(e){return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["camp-login-page"]],decls:13,vars:9,consts:[[1,"typography-title"],[1,"auth-form",3,"formGroup","ngSubmit"],[4,"ngIf"],["class","password-field",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",1,"auth-form__submit-button"],["routerLink","/auth/signup","mat-button",""],[1,"auth-form__error"],["matInput","","placeholder","example@gmail.com","autocomplete","email",3,"formControl"],[1,"password-field"],["autocomplete","current-password",3,"formControl"]],template:function(e,n){1&e&&(r.TgZ(0,"p",0),r._uU(1,"Sign in"),r.qZA(),r.TgZ(2,"form",1),r.NdJ("ngSubmit",function(){return n.handleSubmit()}),r.YNc(3,Y,3,1,"ng-container",2),r.ALo(4,"async"),r.YNc(5,H,6,3,"mat-form-field",2),r.YNc(6,X,8,5,"mat-form-field",3),r.TgZ(7,"button",4),r._uU(8,"Sign in"),r.qZA()(),r.TgZ(9,"a",5),r._uU(10,"Sign up"),r.qZA(),r.YNc(11,G,1,0,"camp-shadow-spinner",2),r.ALo(12,"async")),2&e&&(r.xp6(2),r.Q6J("formGroup",n.form),r.xp6(1),r.Q6J("ngIf",r.lcZ(4,5,n.loginErrors$)),r.xp6(2),r.Q6J("ngIf",n.form.controls.email),r.xp6(1),r.Q6J("ngIf",n.form.controls.password),r.xp6(5),r.Q6J("ngIf",r.lcZ(12,7,n.isSubmitting$)))},dependencies:[d.O5,N.e,m.rH,i._Y,i.Fj,i.JJ,i.JL,i.oH,i.sg,s.KE,s.hX,s.TO,g.Nt,u.zs,u.lW,J,d.Ov,S.m],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--space-m);padding:var(--space-m)}.auth-form[_ngcontent-%COMP%]{display:flex;max-width:var(--auth-form-max-width);width:100%;flex-direction:column;gap:var(--space-s);justify-content:center}.auth-form__error[_ngcontent-%COMP%]{color:var(--primary-color);align-self:center}.auth-form__submit-button[_ngcontent-%COMP%]{align-self:center}"],changeDetection:0}),t})();function k(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.Oqu(r.xi3(2,1,"required","email")))}function K(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"email")))}function rr(t,o){if(1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&t){const e=o.ngIf;r.xp6(1),r.Oqu(e)}}function tr(t,o){if(1&t&&(r.TgZ(0,"mat-form-field")(1,"mat-label"),r._uU(2,"Email"),r.qZA(),r._UZ(3,"input",6),r.YNc(4,k,3,4,"mat-error",2),r.YNc(5,K,3,3,"mat-error",2),r.YNc(6,rr,2,1,"mat-error",2),r.qZA()),2&t){const e=o.ngIf;r.xp6(3),r.Q6J("formControl",e),r.xp6(1),r.Q6J("ngIf",e.hasError("required")),r.xp6(1),r.Q6J("ngIf",e.hasError("email")),r.xp6(1),r.Q6J("ngIf",e.getError("serverError"))}}function er(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.Oqu(r.xi3(2,1,"required","first name")))}function or(t,o){if(1&t&&(r.TgZ(0,"mat-form-field")(1,"mat-label"),r._uU(2,"First name"),r.qZA(),r._UZ(3,"input",7),r.YNc(4,er,3,4,"mat-error",2),r.qZA()),2&t){const e=o.ngIf;r.xp6(3),r.Q6J("formControl",e),r.xp6(1),r.Q6J("ngIf",e.hasError("required"))}}function nr(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.Oqu(r.xi3(2,1,"required","last name")))}function ir(t,o){if(1&t&&(r.TgZ(0,"mat-form-field")(1,"mat-label"),r._uU(2,"Last name"),r.qZA(),r._UZ(3,"input",8),r.YNc(4,nr,3,4,"mat-error",2),r.qZA()),2&t){const e=o.ngIf;r.xp6(3),r.Q6J("formControl",e),r.xp6(1),r.Q6J("ngIf",e.hasError("required"))}}function ar(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.Oqu(r.xi3(2,1,"required","password")))}function sr(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.hij("",r.lcZ(2,1,"minlength")," 8"))}function mr(t,o){if(1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&t){const e=o.ngIf;r.xp6(1),r.Oqu(e)}}function lr(t,o){if(1&t&&(r.TgZ(0,"mat-form-field",9)(1,"mat-label"),r._uU(2,"Password"),r.qZA(),r._UZ(3,"camp-password-field",10),r.YNc(4,ar,3,4,"mat-error",2),r.YNc(5,sr,3,3,"mat-error",2),r.YNc(6,mr,2,1,"mat-error",2),r.qZA()),2&t){const e=o.ngIf;r.xp6(3),r.Q6J("formControl",e),r.xp6(1),r.Q6J("ngIf",e.hasError("required")),r.xp6(1),r.Q6J("ngIf",e.hasError("minlength")),r.xp6(1),r.Q6J("ngIf",e.getError("serverError"))}}function fr(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.Oqu(r.xi3(2,1,"required","repeated password")))}function ur(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.hij("",r.lcZ(2,1,"minlength")," 8"))}function pr(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"fieldErrorText"),r.qZA()),2&t&&(r.xp6(1),r.Oqu(r.xi3(2,1,"passwordRepetition","repeated password")))}function dr(t,o){if(1&t&&(r.TgZ(0,"mat-form-field",9)(1,"mat-label"),r._uU(2,"Re-type password"),r.qZA(),r._UZ(3,"camp-password-field",10),r.YNc(4,fr,3,4,"mat-error",2),r.YNc(5,ur,3,3,"mat-error",2),r.YNc(6,pr,3,4,"mat-error",2),r.qZA()),2&t){const e=o.ngIf;r.xp6(3),r.Q6J("formControl",e),r.xp6(1),r.Q6J("ngIf",e.hasError("required")),r.xp6(1),r.Q6J("ngIf",e.hasError("minlength")),r.xp6(1),r.Q6J("ngIf",e.hasError("passwordRepetition"))}}function cr(t,o){1&t&&r._UZ(0,"camp-shadow-spinner")}let gr=(()=>{class t{constructor(){this.isSubmitting$=new x.X(!1),this.formBuilder=(0,r.f3M)(i.j3),this.authService=(0,r.f3M)(C.e),this.router=(0,r.f3M)(m.F0),this.route=(0,r.f3M)(m.gz),this.queryParamsService=(0,r.f3M)(U),this.untilDestroyed=(0,E.t)(),this.form=this.createForm()}createForm(){return this.formBuilder.group({email:["",[i.kI.required,i.kI.email]],firstName:["",[i.kI.required]],lastName:["",[i.kI.required]],password:["",[i.kI.required,i.kI.minLength(p.MIN_PASSWORD_LENGTH)]],repeatedPassword:["",[i.kI.required,i.kI.minLength(p.MIN_PASSWORD_LENGTH)]]},{validators:[p.passwordRepetition("password","repeatedPassword")]})}handleSubmit(){this.form.invalid||(this.isSubmitting$.next(!0),this.authService.register(this.form.getRawValue()).pipe((0,y.b)(()=>this.navigateToNextUrl()),function W(t){return function(o){return o.pipe((0,A.K)(e=>(e instanceof q.k&&Object.keys(t.controls).forEach(n=>{void 0!==e.errors[n]&&t.controls[n].setErrors({[_.O.AppErrorCode.ServerError]:e.errors[n]})}),(0,w._)(()=>e))))}}(this.form),(0,I.x)(()=>this.isSubmitting$.next(!1)),this.untilDestroyed()).subscribe())}navigateToNextUrl(){this.router.navigateByUrl(this.queryParamsService.mapQueryParamsToUrl(this.route.snapshot.queryParams,"next"))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["camp-register-page"]],decls:14,vars:9,consts:[[1,"typography-title"],[1,"auth-form",3,"formGroup","ngSubmit"],[4,"ngIf"],["class","password-field",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",1,"auth-form__submit-button"],["routerLink","/auth/signin","mat-button",""],["matInput","","placeholder","example@gmail.com","autocomplete","email",3,"formControl"],["matInput","","placeholder","John","autocomplete","given-name",3,"formControl"],["matInput","","placeholder","Doe","autocomplete","family-name",3,"formControl"],[1,"password-field"],["autocomplete","new-password",3,"formControl"]],template:function(e,n){1&e&&(r.TgZ(0,"p",0),r._uU(1,"Sign up"),r.qZA(),r.TgZ(2,"form",1),r.NdJ("ngSubmit",function(){return n.handleSubmit()}),r.YNc(3,tr,7,4,"mat-form-field",2),r.YNc(4,or,5,2,"mat-form-field",2),r.YNc(5,ir,5,2,"mat-form-field",2),r.YNc(6,lr,7,4,"mat-form-field",3),r.YNc(7,dr,7,4,"mat-form-field",3),r.TgZ(8,"button",4),r._uU(9,"Sign up"),r.qZA()(),r.TgZ(10,"a",5),r._uU(11,"Sign in"),r.qZA(),r.YNc(12,cr,1,0,"camp-shadow-spinner",2),r.ALo(13,"async")),2&e&&(r.xp6(2),r.Q6J("formGroup",n.form),r.xp6(1),r.Q6J("ngIf",n.form.controls.email),r.xp6(1),r.Q6J("ngIf",n.form.controls.firstName),r.xp6(1),r.Q6J("ngIf",n.form.controls.lastName),r.xp6(1),r.Q6J("ngIf",n.form.controls.password),r.xp6(1),r.Q6J("ngIf",n.form.controls.repeatedPassword),r.xp6(5),r.Q6J("ngIf",r.lcZ(13,7,n.isSubmitting$)))},dependencies:[d.O5,N.e,m.rH,i._Y,i.Fj,i.JJ,i.JL,i.oH,i.sg,s.KE,s.hX,s.TO,g.Nt,u.zs,u.lW,J,d.Ov,S.m],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--space-m);padding:var(--space-m)}.auth-form[_ngcontent-%COMP%]{display:flex;max-width:var(--auth-form-max-width);width:100%;flex-direction:column;gap:var(--space-s);justify-content:center}.auth-form__error[_ngcontent-%COMP%]{color:var(--primary-color);align-self:center}.auth-form__submit-button[_ngcontent-%COMP%]{align-self:center}"],changeDetection:0}),t})();const _r=[{path:"",redirectTo:"signin",pathMatch:"prefix"},{path:"signin",title:"Sign In",component:V,canActivate:[v.e]},{path:"signup",title:"Sign Up",component:gr,canActivate:[v.e]}];let hr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[m.Bz.forChild(_r),m.Bz]}),t})(),xr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:s.o2,useValue:{appearance:"outline"}}],imports:[d.ez,L.m,hr,i.UX,s.lN,g.c,u.ot,P.Ps]}),t})()}}]);